{% extends "layout.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/chatbot.css') }}">
{% endblock %}

{% block content %}
<!-- Navigation -->
<nav class="navbar">
    <div class="container nav-content">
        <div class="logo">
            <i class="fas fa-graduation-cap"></i>
            CollegePredictor
        </div>
        <ul class="nav-links">
            <li><a href="{{ url_for('dashboard') }}" class="nav-link active">
                <i class="fas fa-home"></i>
                Dashboard
            </a></li>
            <li><a href="{{ url_for('prediction') }}" class="nav-link">
                <i class="fas fa-search"></i>
                Prediction
            </a></li>
            <li><a href="{{ url_for('logout') }}" class="btn btn-secondary logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </a></li>
        </ul>

        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</nav>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
        <a href="{{ url_for('dashboard') }}" class="mobile-nav-link active">
            <i class="fas fa-home"></i>
            Dashboard
        </a>
        <a href="{{ url_for('prediction') }}" class="mobile-nav-link">
            <i class="fas fa-search"></i>
            Prediction
        </a>
        <a href="{{ url_for('logout') }}" class="mobile-nav-link logout">
            <i class="fas fa-sign-out-alt"></i>
            Logout
        </a>
    </div>
</div>

<!-- Main Content -->
<div class="dashboard">
    <div class="container">
        <!-- Welcome Section with Animated Background -->
        <div class="welcome-section">
            <div class="welcome-content">
                <div class="welcome-text">
                    <h1 class="welcome-title">
                        Welcome back, <span class="gradient-text">{{ current_user.username }}</span>! ðŸ‘‹
                    </h1>
                    <p class="welcome-subtitle">
                        Ready to find your perfect college? Our AI-powered system analyzes historical data to provide personalized college recommendations based on your PGCET rank and preferences.
                    </p>
                    <div class="welcome-actions">
                        <a href="{{ url_for('prediction') }}" class="btn btn-primary btn-large">
                            <i class="fas fa-bolt"></i>
                            Start Prediction
                        </a>
                        <button class="btn btn-secondary btn-large" onclick="chatbot.toggleChatbot()">
                            <i class="fas fa-robot"></i>
                            AI Assistant
                        </button>
                    </div>
                </div>
                <div class="welcome-graphic">
                    <div class="floating-card card-1">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="floating-card card-2">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="floating-card card-3">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="stats-section">
            <div class="section-header">
                <h2>Platform Overview</h2>
                <p>Real-time insights about our prediction system</p>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Program Types</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">180+</div>
                        <div class="stat-label">Colleges</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">AI</div>
                        <div class="stat-label">Powered</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number">99%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="actions-section">
            <div class="section-header">
                <h2>Quick Actions</h2>
                <p>Get started with these quick options</p>
            </div>
            <div class="actions-grid">
                <div class="action-card" onclick="window.location.href='{{ url_for('prediction') }}'">
                    <div class="action-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="action-content">
                        <h3>College Prediction</h3>
                        <p>Get AI-powered college recommendations based on your rank and preferences</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="action-glow"></div>
                </div>

                <div class="action-card" onclick="chatbot.toggleChatbot()">
                    <div class="action-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="action-content">
                        <h3>AI Assistant</h3>
                        <p>Chat with our intelligent bot for guided predictions and instant answers</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="action-glow"></div>
                </div>

                <div class="action-card" onclick="window.location.href='{{ url_for('logout') }}'">
                    <div class="action-icon">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <div class="action-content">
                        <h3>Logout</h3>
                        <p>Securely logout from your account</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="action-glow"></div>
                </div>
            </div>
        </div>

        <!-- How It Works -->
        <div class="process-section">
            <div class="section-header">
                <h2>How It Works</h2>
                <p>Simple steps to get your personalized college predictions</p>
            </div>
            <div class="process-steps">
                <div class="process-step">
                    <div class="step-number">01</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3>Enter Your Details</h3>
                        <p>Provide your PGCET rank, category, and preferred program type</p>
                    </div>
                    <div class="step-connector"></div>
                </div>

                <div class="process-step">
                    <div class="step-number">02</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h3>AI Analysis</h3>
                        <p>Our system analyzes historical data and cutoff trends</p>
                    </div>
                    <div class="step-connector"></div>
                </div>

                <div class="process-step">
                    <div class="step-number">03</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3>Get Results</h3>
                        <p>Receive instant AI-powered college matches with probabilities</p>
                    </div>
                    <div class="step-connector"></div>
                </div>

                <div class="process-step">
                    <div class="step-number">04</div>
                    <div class="step-content">
                        <div class="step-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Choose College</h3>
                        <p>Compare colleges and make informed admission decisions</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Showcase -->
        <div class="features-section">
            <div class="section-header">
                <h2>Why Choose Our Platform?</h2>
                <p>Cutting-edge features for smarter college selection</p>
            </div>
            <div class="features-grid">
                <div class="feature-highlight">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Advanced AI Algorithms</h3>
                    <p>Machine learning models trained on 5+ years of historical cutoff data</p>
                </div>

                <div class="feature-highlight">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Real-time Predictions</h3>
                    <p>Instant results with exact matching system</p>
                </div>

                <div class="feature-highlight">
                    <div class="feature-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <h3>Comprehensive Database</h3>
                    <p>180+ colleges across Karnataka with detailed information</p>
                </div>

                <div class="feature-highlight">
                    <div class="feature-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>Smart Assistant</h3>
                    <p>24/7 AI chatbot for guided predictions</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chatbot -->
<div class="chatbot-container">
    <button class="chatbot-button" id="chatbotButton">
        <i class="fas fa-robot"></i>
        <div class="chatbot-pulse"></div>
    </button>
    <div class="chatbot-window" id="chatbotWindow">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <i class="fas fa-robot"></i>
                <h3>College Predictor AI</h3>
            </div>
            <button class="chatbot-close" onclick="chatbot.toggleChatbot()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages"></div>
        <div class="chatbot-input">
            <div class="chatbot-options" id="chatbotOptions"></div>
            <div class="input-group">
                <input type="text" id="messageInput" placeholder="Ask me about college predictions...">
                <button id="sendMessage">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
<script>
// Mobile menu functionality
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');

    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('active');
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!mobileMenu.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
                mobileMenu.classList.remove('active');
            }
        });
    }

    // Initialize floating cards animation
    initFloatingCards();
});

function initFloatingCards() {
    const cards = document.querySelectorAll('.floating-card');
    cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.5}s`;
    });
}
</script>
{% endblock %}